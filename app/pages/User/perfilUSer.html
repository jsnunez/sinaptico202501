<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SINAPTICO</title>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <link rel="stylesheet" href="styles/colores.css">
    <link rel="stylesheet" href="styles/perfil.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>

    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

</head>

<body>

    <!-- Encabezado -->
    <header class="header">
        <div onclick="window.location.href='/helice'" class="logo">
            <!-- <span class="logo-icon">⚡</span> -->
            <span class="logo-text">SINAPTICO</span>
        </div>
        <nav class="nav">
            <button class="nav-button pulse" onclick="window.location.href='/helice'">Hélice</button>
            <button class="nav-button pulse" onclick="window.location.href='/proyectos'">Proyectos</button>
            <button class="nav-button pulse" onclick="window.location.href='/innovacion'">Innovación</button>

            <button class="nav-button pulse" onclick="window.location.href='/Conocimiento'">Conocimiento</button>
            <button class="nav-button pulse" onclick="window.location.href='/convocatorias'">Convocatorias</button>

            <button class="nav-button pulse" onclick="window.location.href='/eventos'">Eventos</button>

            <button class="nav-button pulse" onclick="irEnConstruccion()">Mapa</button>

            <div style="position:fixed;top:70px;right:20px;z-index:1000;font-size:1.5em;cursor:pointer;">
                <span id="icono-notif"><i class="bi bi-bell-fill"></i> <span
                        style='background:red;color:white;border-radius:50%;padding:2px 7px;font-size:0.9em;'>0</span></span>
            </div>
            <div class="notificaciones" id="notificaciones"></div>

            <!-- Botón con menú desplegable -->
            <div class="dropdown">
                <button class=" " id="userMenuBtn">
                    <div id="userPhoto ">
                        <img class="imagenPerfil" src="img/sinfoto.jpg" alt="Foto de perfil"
                            onerror="this.onerror=null;this.src='img/sinfoto.jpg';">
                    </div>

                </button>

                <div class="dropdown-menu" id="userMenu">
                    <a href="/perfil.html">Perfil</a>
                    <a href="/configuracion">Configuración</a>
                    <a href="/logout" id="cerrarSesion">Cerrar sesión</a>
                </div>
            </div>

        </nav>
    </header>

    <!-- Bienvenida y botones de acción -->
    <div class="welcome-container">
        <div id="userPhoto">
            <img id="imagenPerfil" src="img/sinfoto.jpg" alt="Foto de perfil"
                onerror="this.onerror=null;this.src='img/sinfoto.jpg';">
        </div>

        <div class="welcome-text">
            <h2 id="bienvenido">Hola Lisbeth, Bienveni@ a tu perfil </h2>
            <!-- <p class="subtitle">Conectando entidades para potenciar la innovación</p> -->
        </div>

    </div>

    <div class="main-content">
        <h2 class="tittle">Datos Generales</h2>

        <table class="table-perfil">
            <tr>
                <td><strong>Nombres Completos:</strong></td>
                <td>Joan Sebastian Nuñez Serrano</td>
            </tr>
            <tr>
                <td><strong>Tipo de Documento:</strong></td>
                <td>Cédula de Ciudadanía</td>
            </tr>
            <tr>
                <td><strong>Número de Documento:</strong></td>
                <td>1234567890</td>
            </tr>
            <tr>
                <td><strong>Fecha de Nacimiento:</strong></td>
                <td>01/01/1990</td>
            </tr>
            <tr>
                <td><strong>Género:</strong></td>
                <td>Masculino</td>
            </tr>
            <tr>
                <td><strong>Teléfono:</strong></td>
                <td>+57 300 123 4567</td>
            </tr>
            <tr>
                <td><strong>Dirección:</strong></td>
                <td>Calle 123 #45-67, Ciudad, País</td>
            </tr>
            <tr>
                <td><strong>Correo Electrónico:</strong></td>
                <td>sebastian79@gmail.com</td>
            </tr>
        </table>

 <iframe src="CV/SebastianCV.pdf" width="50%" height="600px"></iframe>



    </div>


    <script>
        // Abrir modal al hacer clic en la foto de usuario
        document.getElementById('userPhoto').onclick = function () {
            document.getElementById('modalFotoPerfil').style.display = 'block';

            // Opcional: cargar foto actual si tienes la URL
            // document.getElementById('previewFotoPerfil').src = 'URL_DE_LA_FOTO_ACTUAL';
        };
        // Cerrar modal
        document.getElementById('cerrarModalFotoPerfil').onclick = function () {
            document.getElementById('modalFotoPerfil').style.display = 'none';
        };
        // Vista previa de la imagen seleccionada
        document.getElementById('inputFotoPerfil').onchange = function (e) {
            const file = e.target.files[0];
            if (file) {
                document.getElementById('previewFotoPerfil').src = URL.createObjectURL(file);
            }
        };
        // Guardar foto (debes implementar la lógica de subida en tu backend)
        document.getElementById('formFotoPerfil').onsubmit = function (e) {
            e.preventDefault();
            const userId = obtenerCookie("userId");

            // Ejemplo de subida con fetch y FormData
            const formData = new FormData();
            console.log(document.getElementById('inputFotoPerfil').files[0]);
            formData.append('fotoPerfil', document.getElementById('inputFotoPerfil').files[0]);
            alert('subiendo');
            fetch(`/api/user/cambiarFoto/${userId}`, {
                method: 'PUT',
                body: formData
            }).then(res => res.json())
                .then(data => {
                    // Actualiza la foto en la interfaz si es necesario
                    document.getElementById('modalFotoPerfil').style.display = 'none';
                    // document.getElementById('userPhoto').innerHTML = '<img src="URL_NUEVA_FOTO" ...>';
                    location.reload(); // O actualiza solo la foto
                }).catch(() => {
                    alert('Error al subir la foto');
                });
        };

    </script>

    <script>
        const userMenuBtn = document.getElementById("userMenuBtn");
        const dropdown = userMenuBtn.closest(".dropdown");

        // Mostrar / ocultar el menú al hacer clic
        userMenuBtn.addEventListener("click", (event) => {
            event.stopPropagation(); // evita que el clic cierre inmediatamente el menú
            dropdown.classList.toggle("show");
        });

        // Cerrar el menú si haces clic fuera
        document.addEventListener("click", () => {
            dropdown.classList.remove("show");
        });
    </script>
    <!-- Scripts -->

    <script src="js/notificaciones.js"></script>
    <script src="/js/websocket.js"></script>
    <!-- <script src="/js/cargarProyectos.js"></script> -->




</body>

</html>
<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>sinaptico - Innovaci√≥n Abierta</title>
  <link rel="stylesheet" href="styles/colores.css">

  <link rel="stylesheet" href="styles/innovacion.css">
  <link rel="stylesheet" href="styles/clasificados.css">
  <link rel="stylesheet" href="styles/menu.css">
  <link rel="stylesheet" href="styles/conocimiento.css">
  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>

  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</head>

<body>
    <!-- Encabezado -->
    <header>
        <div class="header">
            <div onclick="window.location.href='/helice'">
                <!-- <span class="logo-icon">‚ö°</span> -->
                <img src="/img/logo1.png" alt="SINAPTICO" class="logo" style="height:8vh;">
            </div>
            <div style="display: flex; align-items: center; gap: 20px;">
                <div style="font-size:1.5em;cursor:pointer;">
                    <span id="icono-notif">üîî <span
                            style='background:red;color:white;border-radius:50%;padding:2px 7px;font-size:0.9em;'>0</span></span>
                </div>
                <div class="notificaciones" id="notificaciones"></div>


                <div class="dropdown">
                    <button id="userMenuBtn" style="display: flex; align-items: center;">
                        <div id="userPhoto ">
                            <img class="imagenPerfil" id="imagenPerfilSecundaria" src="img/sinfoto.jpg"
                                alt="Foto de perfil" onerror="this.onerror=null;this.src='img/sinfoto.jpg';">

                        </div>
                        <h3 id="nombreUsuarioHeader" style="color:white; margin-left:10px;">Usuario <i
                                class="bi bi-chevron-down"></i> </h3>
                    </button>

                    <div class="dropdown-menu" id="userMenu">
                        <a class="perfilUser" id="perfilUser">Perfil</a>
                        <a  id="habilitarMiEmpresa" style="display: none;">Empresa</a>
                        <a href="#" id="cerrarSesion">Cerrar sesi√≥n</a>
                    </div>
                </div>
            </div>
        </div>
        <nav class="nav">

            <button class="nav-button" data-link="/helice" id="inicio"
                onclick="window.location.href='/helice'">Inicio</button>

            <div class="dropdown menuG">
                <button class="nav-button dropdown-btnG" data-link="/directorio">Directorio</button>
                <div class="dropdown-menu dropdown-menuG">
                    <a href="/directorio">Entidades</a>
                    <a href="/directorioPersonas">Personas</a>
                </div>
            </div>
            <button class="nav-button" onclick="window.location.href='/proyectos'">Proyectos</button>
            <button class="nav-button" onclick="window.location.href='/ofertaRegional'" data-link="/ofertaRegional">Oferta Regional</button>
            <div class="dropdown menuG">
                <button class="nav-button dropdown-btnG" data-link="/retos">Innovaci√≥n Abierta</button>
                <div class="dropdown-menu dropdown-menuG">
                    <a href="/retosEmpresariales">Retos Empresariales</a>
                    <a href="/retosAula">Retos de Aula</a>
                </div>
            </div>
            <div class="dropdown menuG" >
                <button class="nav-button dropdown-btnG" data-link="/conocimiento">Conocimiento Abierto</button>
                <div class="dropdown-menu dropdown-menuG">
                    <a href="/conocimientoCursosVirtuales" data-link="/cursosVirtuales">Cursos</a>
                    <a href="/conocimientoBiblioteca"  data-link="/conocimientoBiblioteca">Biblioteca</a>
                </div>
            </div>
            <button class="nav-button" onclick="window.location.href='/convocatorias'">Convocatorias</button>

            <button class="nav-button" onclick="window.location.href='/eventos'">Eventos</button>
            
        </nav>
    </header>

  <!-- Challenges Section -->
  <section id="retos" class="main-content" style="display: block; margin: 2rem auto 1rem;">
    <div class="main-content">
      <div style="display: flex;   justify-content: space-between;     margin-bottom: 3rem;">
        <div class="section-header">
          <i class="fas fa-rocket"></i>
          <h2 style="color:white;">2025 - Retos activos</h2>
        </div>
        <button class="action-button" id="btnNuevoReto">

          <span class="button-icon">+</span>Crear Reto
        </button>

      </div>
      <div class="challenges-grid">
        <!-- Despliega los retos activos -->
      </div>
    </div>
  </section>


  <div id="modalCrearReto" class="modal" style="display: none;">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2 style="text-align: center;">Nuevo Reto</h2>
      <form id="crearRetoForm">
        <div class="form-section">
          <div class="input-box ">
            <label for="nombre">Nombre del Reto:</label>
            <input type="text" id="nombre" name="nombre" required>

            <label for="ubicacionVideo">Video promotor:</label>
            <input type="file" id="video" name="video" accept="video/*">

            <label for="descripcion">Descripci√≥n:</label>
            <textarea id="descripcion" name="descripcion"></textarea>

            <label for="ubicacionFicha">Ficha de Requisitos:</label>
            <input type="file" id="ficha" name="ficha" accept=".pdf,.doc,.docx">
          </div>
        </div>
        <button type="submit" class="modal-button">Crear Reto</button>

      </form>
    </div>
  </div>
  <!-- Spinner de carga de p√°gina -->
  <div id="page-spinner-overlay" aria-hidden="true" role="status" aria-label="Cargando">
    <div class="spinner" aria-hidden="true"></div>
    <div class="spinner-text">Cargando...</div>
  </div>

  <script src="/js/config.js"></script>
  <script src="js/retos.js"></script>
  <script src="js/crearReto.js"></script>
  <script src="js/notificaciones.js"></script>
  <script src="/js/websocket.js"></script>
  <script src="/js/menu.js"></script>
  
  <script src="js/enviarInvitacion.js"></script>


  <script>
    (function () {
      // Garantiza que el overlay permanezca al menos 5s desde que se ejecuta este script.
      const MIN_MS = 1000;
      const overlay = document.getElementById('page-spinner-overlay');
      if (!overlay) return;

      // Si ya pas√≥ m√°s de MIN_MS desde la navegaci√≥n start, aun as√≠ mostramos el overlay breve
      const start = performance.timing ? performance.timing.navigationStart : Date.now();
      const now = Date.now();
      const elapsed = Math.max(0, now - start);
      const remaining = Math.max(0, MIN_MS - elapsed);

      // Evita interacci√≥n mientras existe el overlay
      document.documentElement.style.overflow = 'hidden';
      document.body.style.overflow = 'hidden';

      setTimeout(() => {
        console.log('MIN_MS spinner:', MIN_MS);
        // permitir scroll cuando hide completo
        setTimeout(() => {
          if (overlay && overlay.parentNode) overlay.parentNode.removeChild(overlay);
          document.documentElement.style.overflow = '';
          document.body.style.overflow = '';
        }, 420);
      }, remaining);
    })();
  </script>

  <!-- Utilidades-->
 

</body>

</html>